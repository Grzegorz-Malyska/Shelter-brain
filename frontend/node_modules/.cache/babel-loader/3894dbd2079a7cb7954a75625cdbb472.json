{"ast":null,"code":"import _defineProperty from \"/home/gjm/Pulpit/Shelter-brain/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/gjm/Pulpit/Shelter-brain/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/gjm/Pulpit/Shelter-brain/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/gjm/Pulpit/Shelter-brain/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/gjm/Pulpit/Shelter-brain/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/gjm/Pulpit/Shelter-brain/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/gjm/Pulpit/Shelter-brain/frontend/src/components/auth/AccountLoginForm.js\";\nimport React from \"react\";\nimport DismissableAlert from \"../../utils/DismissableAlert\";\nimport axios from \"axios\";\nimport { withRouter } from \"react-router-dom\";\nimport Config from \"../../Config\";\n\nvar AccountLoginForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AccountLoginForm, _React$Component);\n\n  function AccountLoginForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AccountLoginForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AccountLoginForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      name: \"\",\n      password: \"\",\n      errorMessage: null\n    };\n\n    _this.genericOnChangeEventHandler = function (e) {\n      return _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.onLogin = function (e) {\n      e.preventDefault(); // check for one-word name\n\n      if (_this.state.name.match(/\\b\\w+\\b/g) > 1) {\n        _this.setState({\n          errorMessage: \"Login musi być jednowyrazowy!\"\n        });\n\n        return;\n      }\n\n      e.target.reset();\n      axios.post(\"\".concat(Config.AJAX_BASE_URL, \"/login\"), {\n        name: _this.state.name,\n        password: _this.state.password\n      }).then(function (res) {\n        sessionStorage.setItem(\"jwt\", res.headers[\"x-auth\"]);\n\n        _this.props.history.push(\"/profile\");\n      }).catch(function (err) {\n        return _this.setState({\n          errorMessage: err.response !== undefined ? err.response.data : \"Brak połączenia z serwerem!\"\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(AccountLoginForm, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var randomValueForId = Math.round(Math.random() * 100);\n      return React.createElement(\"div\", {\n        style: {\n          padding: \"20px\",\n          border: \"4px black solid\",\n          borderRadius: \"8px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, \"Zaloguj si\\u0119\"), React.createElement(\"form\", {\n        onSubmit: this.onLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"name_\".concat(randomValueForId),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, \"Nazwa/login\"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        className: \"form-control\",\n        id: \"name_\".concat(randomValueForId),\n        onChange: this.genericOnChangeEventHandler,\n        required: true,\n        placeholder: \"Wpisz sw\\xF3j login...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"password_\".concat(randomValueForId),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, \"Has\\u0142o\"), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        className: \"form-control\",\n        id: \"password_\".concat(randomValueForId),\n        onChange: this.genericOnChangeEventHandler,\n        required: true,\n        placeholder: \"Wpisz swoje has\\u0142o...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, \"Logowanie\"), this.state.errorMessage !== null && React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), React.createElement(DismissableAlert, {\n        key: Math.random(),\n        color: \"danger\",\n        timeout: 3,\n        toggle: function toggle() {\n          return _this2.setState({\n            errorMessage: null\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, this.state.errorMessage))));\n    }\n  }]);\n\n  return AccountLoginForm;\n}(React.Component);\n\nexport default withRouter(AccountLoginForm);","map":{"version":3,"sources":["/home/gjm/Pulpit/Shelter-brain/frontend/src/components/auth/AccountLoginForm.js"],"names":["React","DismissableAlert","axios","withRouter","Config","AccountLoginForm","state","name","password","errorMessage","genericOnChangeEventHandler","e","setState","target","value","onLogin","preventDefault","match","reset","post","AJAX_BASE_URL","then","res","sessionStorage","setItem","headers","props","history","push","catch","err","response","undefined","data","randomValueForId","Math","round","random","padding","border","borderRadius","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport DismissableAlert from \"../../utils/DismissableAlert\";\nimport axios from \"axios\";\nimport {withRouter} from \"react-router-dom\";\nimport Config from \"../../Config\";\n\nclass AccountLoginForm extends React.Component {\n    state = {\n        name: \"\",\n        password: \"\",\n\n        errorMessage: null\n    };\n\n    genericOnChangeEventHandler = e => this.setState({[e.target.name]: e.target.value});\n\n    onLogin = e => {\n        e.preventDefault();\n\n        // check for one-word name\n        if(this.state.name.match(/\\b\\w+\\b/g) > 1) {\n            this.setState({errorMessage: \"Login musi być jednowyrazowy!\"});\n            return;\n        }\n\n        e.target.reset();\n\n        axios.post(`${Config.AJAX_BASE_URL}/login`, {\n            name: this.state.name,\n            password: this.state.password\n        })\n            .then(res => {\n                sessionStorage.setItem(\"jwt\", res.headers[\"x-auth\"]);\n                this.props.history.push(\"/profile\");\n            })\n            .catch(err => this.setState({\n                errorMessage: err.response !== undefined ? err.response.data : \"Brak połączenia z serwerem!\"\n            }));\n    };\n\n    render() {\n        const randomValueForId = Math.round(Math.random() * 100);\n\n        return (\n            <div style={{padding: \"20px\", border: \"4px black solid\", borderRadius: \"8px\"}}>\n                <h3>Zaloguj się</h3>\n                <form onSubmit={this.onLogin}>\n                    <div className=\"form-group\">\n                        <label htmlFor={`name_${randomValueForId}`}>Nazwa/login</label>\n                        <input type=\"text\" name=\"name\" className=\"form-control\" id={`name_${randomValueForId}`} onChange={this.genericOnChangeEventHandler}\n                            required={true} placeholder=\"Wpisz swój login...\" />\n                            </div>\n                    <div className=\"form-group\">\n                        <label htmlFor={`password_${randomValueForId}`}>Hasło</label>\n                        <input type=\"password\" name=\"password\" className=\"form-control\" id={`password_${randomValueForId}`} onChange={this.genericOnChangeEventHandler}\n                            required={true} placeholder=\"Wpisz swoje hasło...\" />\n                    </div>\n                    <button type=\"submit\" className=\"btn btn-primary\">Logowanie</button>\n\n                    {this.state.errorMessage !== null &&\n                        <div>\n                            <br />\n                            <br />\n                            <DismissableAlert key={Math.random()} color=\"danger\" timeout={3} toggle={() => this.setState({errorMessage: null})}>\n                                {this.state.errorMessage}\n                            </DismissableAlert>\n                        </div>\n                    }\n                </form>\n            </div>\n        );\n    }\n}\n\nexport default withRouter(AccountLoginForm);\n"]},"metadata":{},"sourceType":"module"}